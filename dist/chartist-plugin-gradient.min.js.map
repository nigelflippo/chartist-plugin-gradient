{"version":3,"sources":["chartist-plugin-gradient.js"],"names":["root","factory","define","amd","Chartist","uuid","returnExportsGlobal","exports","module","require","this","window","document","getDefaultOptions","maskIds","classNames","aboveBase","belowBase","maskNames","maskAboveId","maskBelowId","generateGradient","options","y1","isAbove","y2","id","gradient","Svg","attr","x1","x2","start","offset","stop-color","stop-opacity","stop","append","svgDefs","createMasks","data","defs","svg","querySelector","elem","projectedBounds","chartRect","height","axisY","projectValue","threshold","width","gradientAbove","gradientBelow","x","y","style","plugins","ctAreaGradient","replace","c","r","Math","random","toString","extend","chart","Line","on","type","element","parent","_node","cloneNode","mask","addClass"],"mappings":"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","file":"chartist-plugin-gradient.min.js","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([\"chartist\",\n      \"uuid\"], function (Chartist, uuid) {\n      return (root.returnExportsGlobal = factory(Chartist, uuid));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"chartist\"),\n      require(\"uuid\"));\n  } else {\n    root['Chartist.plugins.ctAreaGradient'] = factory(Chartist);\n  }\n}(this, function (Chartist, uuid) {\n\n  /**\n   * Chartist.js plugin to display gradient above and below threshold.\n   *\n   */\n  /* global Chartist */\n  (function (window, document, Chartist) {\n  \t'use strict';\n\n  \tfunction getDefaultOptions (maskIds) {\n  \t\treturn {\n  \t\t\tclassNames: {\n  \t\t\t\taboveBase: 'ct-base-above',\n  \t\t\t\tbelowBase: 'ct-base-below'\n  \t\t\t},\n  \t\t\tmaskNames: {\n  \t\t\t\taboveBase: 'ct-base-mask-above-' + maskIds.maskAboveId,\n  \t\t\t\tbelowBase: 'ct-base-mask-below-' + maskIds.maskBelowId\n  \t\t\t}\n  \t\t};\n  \t}\n\n  \tfunction generateGradient (options) {\n  \t\tvar y1 = options.isAbove ? '0%' : '100%';\n  \t\tvar y2 = options.isAbove ? '100%' : '0%';\n  \t\tvar id = options.isAbove ? 'above' : 'below';\n  \t\tvar gradient = new Chartist.Svg('linearGradient')\n  \t\t\t.attr({\n  \t\t\t\t'id': 'ct-gradient-' + id,\n  \t\t\t\t'x1': '0%',\n  \t\t\t\t'x2': '0%',\n  \t\t\t\t'y1': y1,\n  \t\t\t\t'y2': y2\n  \t\t\t});\n  \t\tvar start = new Chartist.Svg('stop')\n  \t\t\t.attr({\n  \t\t\t\t'offset': '0%',\n  \t\t\t\t'stop-color': '#fff',\n  \t\t\t\t'stop-opacity': '1.0'\n  \t\t\t});\n  \t\tvar stop = new Chartist.Svg('stop')\n  \t\t\t.attr({\n  \t\t\t\t'offset': '100%',\n  \t\t\t\t'stop-color': '#fff',\n  \t\t\t\t'stop-opacity': '0.01'\n  \t\t\t});\n  \t\tgradient.append(start);\n  \t\tgradient.append(stop);\n  \t\tvar svgDefs = new Chartist.Svg('defs');\n  \t\tsvgDefs.append(gradient);\n  \t\treturn svgDefs;\n  \t}\n\n  \tfunction createMasks (data, options) {\n  \t\tvar defs = data.svg.querySelector('defs') || data.svg.elem('defs');\n  \t\tvar projectedBounds = data.chartRect.height() - data.axisY.projectValue(options.threshold) + data.chartRect.y2;\n  \t\tvar width = data.svg.width();\n  \t\tvar height = data.svg.height();\n\n  \t\tvar gradientAbove = generateGradient({ isAbove: true });\n  \t\tvar gradientBelow = generateGradient({ isAbove: false });\n  \t\tdata.svg.append(gradientAbove);\n  \t\tdata.svg.append(gradientBelow);\n\n  \t\tdefs\n  \t\t\t.elem('mask', {\n  \t\t\t\tx: 0,\n  \t\t\t\ty: 0,\n  \t\t\t\twidth: width,\n  \t\t\t\theight: height,\n  \t\t\t\tid: options.maskNames.aboveBase\n  \t\t\t})\n  \t\t\t.elem('rect', {\n  \t\t\t\tx: 0,\n  \t\t\t\ty: 0,\n  \t\t\t\twidth: width,\n  \t\t\t\theight: projectedBounds,\n  \t\t\t\tstyle: 'fill: url(#ct-gradient-above)'\n  \t\t\t});\n  \t\tdefs\n  \t\t\t.elem('mask', {\n  \t\t\t\tx: 0,\n  \t\t\t\ty: 0,\n  \t\t\t\twidth: width,\n  \t\t\t\theight: height,\n  \t\t\t\tid: options.maskNames.belowBase\n  \t\t\t})\n  \t\t\t.elem('rect', {\n  \t\t\t\tx: 0,\n  \t\t\t\ty: projectedBounds,\n  \t\t\t\twidth: width,\n  \t\t\t\theight: height - projectedBounds,\n  \t\t\t\tstyle: 'fill: url(#ct-gradient-below)'\n  \t\t\t});\n\n  \t\treturn defs;\n  \t}\n\n  \tChartist.plugins = Chartist.plugins || {};\n  \tChartist.plugins.ctAreaGradient = function (options) {\n\n  \t\tfunction uuid() {\n  \t\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n  \t\t\t\tvar r = Math.random() * 16 | 0, v = c === 'x' ? r : (r & 0x3 | 0x8);\n  \t\t\t\treturn v.toString(16);\n  \t\t\t});\n  \t\t}\n\n  \t\tvar maskIds = {\n  \t\t\tmaskAboveId: uuid(),\n  \t\t\tmaskBelowId: uuid()\n  \t\t};\n  \t\toptions = Chartist.extend({}, getDefaultOptions(maskIds), options);\n\n  \t\treturn function ctAreaGradient (chart) {\n  \t\t\tif (chart instanceof Chartist.Line) {\n  \t\t\t\tchart.on('draw', function (data) {\n  \t\t\t\t\tif (data.type === 'area') {\n  \t\t\t\t\t\tdata.element\n  \t\t\t\t\t\t\t.parent()\n  \t\t\t\t\t\t\t.elem(data.element._node.cloneNode(true))\n  \t\t\t\t\t\t\t.attr({\n  \t\t\t\t\t\t\t\tmask: 'url(#' + options.maskNames.aboveBase + ')'\n  \t\t\t\t\t\t\t})\n  \t\t\t\t\t\t\t.addClass(options.classNames.aboveBase);\n  \t\t\t\t\t\tdata.element\n  \t\t\t\t\t\t\t.attr({\n  \t\t\t\t\t\t\t\tmask: 'url(#' + options.maskNames.belowBase + ')'\n  \t\t\t\t\t\t\t})\n  \t\t\t\t\t\t\t.addClass(options.classNames.belowBase);\n  \t\t\t\t\t}\n  \t\t\t\t});\n\n  \t\t\t\tchart.on('created', function (data) {\n  \t\t\t\t\tcreateMasks(data, options);\n  \t\t\t\t});\n  \t\t\t}\n  \t\t};\n  \t};\n  }(window, document, Chartist));\n\n  return Chartist.plugins.ctAreaGradient;\n\n}));\n"]}